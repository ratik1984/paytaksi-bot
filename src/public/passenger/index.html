<!doctype html>
<html lang="az">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>PayTaksi - Sərnişin</title>

  <!-- Telegram WebApp -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Shared helpers (api(), tg user, pt token, etc.) -->
  <script>window.__ROLE__='passenger';</script>
  <script src="/assets/common.js"></script>

  <!-- Leaflet (map). If CDN is blocked in Telegram WebView, we auto-fallback to "no-map" mode. -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root{
      --bg:#f5f6f8;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --btn:#111111;
      --danger:#b91c1c;
      --radius:18px;
    }
    *{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
    html,body{ height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text); }
    #wrap{ position:fixed; inset:0; display:flex; flex-direction:column; }
    #map{ position:absolute; inset:0; }
    .topBtns{
      position:absolute; top:14px; left:14px; right:14px;
      display:flex; justify-content:space-between; pointer-events:none;
    }
    .fab{ pointer-events:auto; width:52px; height:52px; border-radius:26px; border:0; background:rgba(255,255,255,.92); box-shadow:0 10px 24px rgba(0,0,0,.12); display:grid; place-items:center; }
    .fab svg{ width:22px; height:22px; }

    .sheet{
      position:absolute; left:0; right:0; bottom:0;
      background:var(--card);
      border-top-left-radius:24px;
      border-top-right-radius:24px;
      box-shadow:0 -14px 40px rgba(0,0,0,.18);
      padding:10px 14px 18px;
      touch-action: manipulation;
    }
    .grab{ width:46px; height:5px; border-radius:999px; background:#d1d5db; margin:6px auto 10px; }
    h1{ font-size:34px; margin:6px 4px 10px; letter-spacing:-0.6px; }
    .row{ display:flex; gap:10px; align-items:center; }
    .input{
      width:100%;
      border:1px solid var(--line);
      border-radius:14px;
      padding:14px 14px;
      font-size:16px;
      outline:none;
      background:#fff;
    }
    .hint{ font-size:13px; color:var(--muted); margin:10px 6px 0; }
    .btn{
      width:100%;
      border:0;
      border-radius:16px;
      padding:14px 16px;
      font-size:18px;
      font-weight:700;
      background: linear-gradient(180deg, #111 0%, #000 100%);
      color:#fff;
      cursor:pointer;
      box-shadow: 0 12px 26px rgba(0,0,0,.22);
    }
    .btn:disabled{ opacity:.55; cursor:not-allowed; }
    .btnDanger{ background:var(--danger); box-shadow:none; }
    .btnGhost{ background:#111; color:#fff; }

    .suggestWrap{ position:relative; }
    .suggest{
      position:absolute; left:0; right:0; top:52px;
      background:#fff; border:1px solid var(--line);
      border-radius:14px; overflow:hidden; z-index:9999;
      box-shadow:0 20px 40px rgba(0,0,0,.18);
      max-height:260px; overflow:auto;
    }
    .sItem{ padding:12px 12px; border-bottom:1px solid var(--line); cursor:pointer; }
    .sItem:last-child{ border-bottom:0; }
    .sTitle{ font-weight:650; }
    .sSub{ color:var(--muted); font-size:12.5px; margin-top:3px; }
    .status{ margin:10px 6px 0; font-size:14px; color:var(--muted); }

    .driverCard{
      margin-top:10px;
      border:1px solid var(--line);
      border-radius:18px;
      padding:12px;
    }
    .dTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .dName{ font-weight:800; font-size:18px; }
    .dMeta{ color:var(--muted); font-size:13px; margin-top:3px; }
    .dBtns{ display:flex; gap:10px; margin-top:12px; }
    .dBtns .btn{ font-size:16px; padding:12px 14px; border-radius:14px; box-shadow:none; }
    .pill{ display:inline-block; font-size:12px; padding:4px 10px; border-radius:999px; background:#f3f4f6; color:#111; font-weight:700; }

    /* keep room for Telegram bottom bar / phone nav */
    .safePad{ height:12px; }

    /* Tiny debug strip (only shown on errors) */
    .debugStrip{position:fixed;left:10px;right:10px;top:10px;background:rgba(0,0,0,.82);color:#fff;padding:10px 12px;border-radius:14px;font-size:12px;display:none;z-index:10000;white-space:pre-wrap}

    /* Fallback (no-map) UI */
    #fallback{display:none;margin-top:10px}
    #fallback input{width:100%;padding:14px;border-radius:18px;border:1px solid var(--line);font-size:16px;box-sizing:border-box}
    .small{font-size:12px;color:var(--muted);margin-top:8px}
    .sugs{margin-top:8px}
    .sug{padding:10px 12px;border:1px solid var(--line);border-radius:14px;margin:8px 0;background:#fafafa;cursor:pointer}
    .sug strong{display:block}
    .sug span{display:block;font-size:12px;color:var(--muted);margin-top:2px}
  </style>
</head>

<body>
  <div id="wrap">
    <div id="map"></div>

    <div class="topBtns">
      <button id="btnMenu" class="fab" aria-label="Menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
      <button id="btnCenter" class="fab" aria-label="GPS">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M12 2v3M12 19v3M2 12h3M19 12h3"/><circle cx="12" cy="12" r="6"/></svg>
      </button>
    </div>

    <div class="sheet">
      <div class="grab"></div>
      <h1 id="title">Haraya?</h1>

      <div class="suggestWrap">
        <input id="destInput" class="input" placeholder="Təyinat yeri" autocomplete="off" />
        <div id="destSuggest" class="suggest" style="display:none"></div>
      </div>

      <div style="height:10px"></div>
      <button id="btnCreate" class="btn" disabled>Sifariş et</button>

      <div id="status" class="status">GPS oxunur…</div>

      <!-- Fallback UI (shown automatically if map fails to load in Telegram WebView) -->
      <div id="fallback">
        <div class="hint" style="margin-top:8px">
          Xəritə yüklənmədi. Bu rejimdə sifarişi xəritəsiz verə bilərsiniz.
        </div>
        <div style="margin-top:10px">
          <input id="pickupTxt" placeholder="Mövcud yeriniz (məs: 28 May, Nərimanov...)" autocomplete="off" />
          <div class="sugs" id="pickupSuggestions"></div>
        </div>
        <div class="small">İpucu: əvvəlcə mövcud yeri seçin, sonra təyinatı seçin.</div>
      </div>

      <div id="driverCard" class="driverCard" style="display:none">
        <div class="dTop">
          <div>
            <div class="dName" id="dName">Sürücü</div>
            <div class="dMeta" id="dMeta">—</div>
          </div>
          <div class="pill" id="dEta" style="display:none">— dəq</div>
        </div>
        <div class="dBtns">
          <button id="btnCall" class="btn btnGhost" type="button">Zəng</button>
          <button id="btnMsg" class="btn btnGhost" type="button">Mesaj</button>
          <button id="btnCancel" class="btn btnDanger" type="button">Ləğv et</button>
        </div>
        <div class="hint" id="dHint"></div>
      </div>

      <div class="safePad"></div>
    </div>
  </div>

  <div class="debugStrip" id="debugStrip"></div>

  <!-- Legacy panel is intentionally kept in codebase; this screen focuses on a stable Bolt-like flow. -->

  <script>
    // --- Small utils
    const $ = (id)=>document.getElementById(id);
    const statusEl = $('status');
    const destInput = $('destInput');
    const destSuggest = $('destSuggest');
    const btnCreate = $('btnCreate');
    const driverCard = $('driverCard');
    const dName = $('dName');
    const dMeta = $('dMeta');
    const dEta = $('dEta');
    const dHint = $('dHint');
    const btnCall = $('btnCall');
    const btnMsg = $('btnMsg');
    const btnCancel = $('btnCancel');

    const u = tgUser();
    if (window.Telegram?.WebApp){
      try{ Telegram.WebApp.expand(); }catch(_){ }
    }

    function haversineKm(a, b){
      const R=6371;
      const toRad=(x)=>x*Math.PI/180;
      const dLat=toRad(b.lat-a.lat);
      const dLon=toRad(b.lon-a.lon);
      const s1=Math.sin(dLat/2);
      const s2=Math.sin(dLon/2);
      const q=s1*s1 + Math.cos(toRad(a.lat))*Math.cos(toRad(b.lat))*s2*s2;
      return 2*R*Math.asin(Math.sqrt(q));
    }

    // --- Debug / error visibility (helps when Telegram WebView hides console)
    const debugStrip = $('debugStrip');
    function showDebug(msg){
      if (!debugStrip) return;
      debugStrip.style.display = 'block';
      debugStrip.textContent = String(msg).slice(0, 1200);
    }
    window.addEventListener('error', (e)=>{
      showDebug('JS error: ' + (e?.message || e));
    });
    window.addEventListener('unhandledrejection', (e)=>{
      showDebug('Promise error: ' + (e?.reason?.message || e?.reason || e));
    });

    // --- Map (can fail if Leaflet CDN blocked). If it fails, we fallback to "no-map" mode.
    let map, pickMarker, dropMarker, drvMarker, line;
    let mapReady = false;
    function enableFallbackMode(reason){
      try{ document.getElementById('mapWrap').style.display='none'; }catch(_){ }
      try{ document.getElementById('fallback').style.display='block'; }catch(_){ }
      setStatus('Xəritə yüklənmədi. Manual rejim aktivdir.', false);
      showDebug('Map disabled. Reason: ' + (reason||'unknown'));
      mapReady = false;
    }
    function initMap(){
      try{
        if (!window.L || typeof window.L.map !== 'function') {
          enableFallbackMode('Leaflet yüklənmədi (CDN blok ola bilər)');
          return;
        }
        map = L.map('map', { zoomControl:false, attributionControl:false });
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);
        map.setView([40.4093, 49.8671], 12); // Baku
        mapReady = true;
      } catch(err){
        enableFallbackMode(err?.message || String(err));
      }
    }
    initMap();

    function setMarker(which, lat, lon){
      if (!mapReady) return;
      if (!isFinite(lat)||!isFinite(lon)) return;
      const ll=[lat,lon];
      if (which==='pick'){
        if (!pickMarker) pickMarker=L.circleMarker(ll,{radius:10}).addTo(map);
        pickMarker.setLatLng(ll);
      } else if (which==='drop'){
        if (!dropMarker) dropMarker=L.marker(ll).addTo(map);
        dropMarker.setLatLng(ll);
      } else if (which==='drv'){
        if (!drvMarker) drvMarker=L.marker(ll).addTo(map);
        drvMarker.setLatLng(ll);
      }
    }
    function drawLine(p1, p2){
      if (!mapReady) return;
      try{ if (line){ map.removeLayer(line); line=null; } }catch(_){ }
      if (!p1 || !p2) return;
      line = L.polyline([[p1.lat,p1.lon],[p2.lat,p2.lon]], { weight: 5, opacity: 0.9 }).addTo(map);
      map.fitBounds(line.getBounds(), { padding:[40,120] });
    }

    // --- State
    let pickup=null;
    let drop=null;
    let activeRide=null;
    let pollTmr=null;
    let sugTmr=null;

    function setStatus(msg, ok=true){
      statusEl.textContent = msg;
      statusEl.style.color = ok ? '' : 'crimson';
    }

    async function reverseName(lat, lon){
      try{
        const url = new URL('/api/reverse', location.origin);
        url.searchParams.set('lat', String(lat));
        url.searchParams.set('lon', String(lon));
        const r = await fetch(url.toString());
        const j = await r.json();
        if (j?.ok && (j.name || j.display_name)) return (j.name || j.display_name);
      }catch(_){ }
      return '';
    }

    async function ensurePickup(force=false){
      if (pickup && !force) return pickup;
      setStatus('GPS oxunur…');
      return new Promise((resolve)=>{
        let done = false;
        const finish = (val)=>{ if(done) return; done = true; try{ clearTimeout(hardTmr); }catch(_){ } resolve(val); };
        // Hard fallback: some WebViews never call either callback unless user taps.
        const hardTmr = setTimeout(()=>{
          // Some WebViews never return geolocation until the user interacts.
          if (!mapReady) {
            try{ document.getElementById('fallback').style.display='block'; }catch(_){ }
            setStatus('GPS alınmadı. Mövcud yeri yazıb seçin (manual rejim).', false);
          } else {
            setStatus('GPS icazəsi üçün "hədəf" düyməsinə toxunun (manual rejim).', false);
          }
          finish(null);
        }, 8000);

        if (!navigator.geolocation){
          setStatus('Bu cihazda GPS yoxdur.', false);
          return finish(null);
        }

        navigator.geolocation.getCurrentPosition(async (pos)=>{
          pickup = { lat: pos.coords.latitude, lon: pos.coords.longitude, text: 'Cari yer' };
          setMarker('pick', pickup.lat, pickup.lon);
          try{ map.setView([pickup.lat, pickup.lon], 16); }catch(_){ }
          const nm = await reverseName(pickup.lat, pickup.lon);
          if (nm) pickup.text = nm;
          setStatus('Pick-up: '+pickup.text);
          validate();
          finish(pickup);
        }, (err)=>{
          if (!mapReady) {
            try{ document.getElementById('fallback').style.display='block'; }catch(_){ }
            setStatus('GPS icazəsi yoxdur. Mövcud yeri yazıb seçin (manual rejim).', false);
          } else {
            setStatus('GPS icazəsi yoxdur. Telefonun Location icazəsini aktiv edin.', false);
          }
          validate();
          finish(null);
        }, { enableHighAccuracy:true, timeout:12000, maximumAge:10000 });
      });
    }

    function validate(){
      // Creating a ride needs BOTH pickup + destination
      btnCreate.disabled = !(pickup && drop) || !!activeRide;
    }

    // --- Suggestions
    function showSuggest(items){
      if (!items || !items.length){
        destSuggest.style.display='none';
        destSuggest.innerHTML='';
        return;
      }
      destSuggest.innerHTML = items.map((it, idx)=>{
        const title = (it.title||'').replace(/</g,'&lt;');
        const sub = (it.subtitle||'').replace(/</g,'&lt;');
        return `<div class="sItem" data-idx="${idx}"><div class="sTitle">${title}</div><div class="sSub">${sub}</div></div>`;
      }).join('');
      destSuggest.style.display='block';
      // click handler (event delegation)
      destSuggest.onclick = (e)=>{
        const el = e.target.closest('.sItem');
        if (!el) return;
        const idx = Number(el.dataset.idx);
        const it = items[idx];
        if (!it) return;
        drop = { lat: Number(it.lat), lon: Number(it.lon), text: it.title };
        destInput.value = it.title;
        destSuggest.style.display='none';
        destSuggest.innerHTML='';
        setMarker('drop', drop.lat, drop.lon);
        if (pickup) drawLine(pickup, drop);
        validate();
      };
    }

    async function loadSuggestions(q){
      try{
        const url = new URL('/api/places', location.origin);
        url.searchParams.set('q', q);
        if (pickup){ url.searchParams.set('lat', String(pickup.lat)); url.searchParams.set('lon', String(pickup.lon)); }
        const r = await fetch(url.toString());
        const j = await r.json();
        if (j?.ok) return j.items || [];
      }catch(_){ }
      return [];
    }

    destInput.addEventListener('input', ()=>{
      const q = destInput.value.trim();
      drop = null;
      validate();
      clearTimeout(sugTmr);
      if (q.length < 3){ showSuggest([]); return; }
      sugTmr = setTimeout(async ()=>{
        const items = await loadSuggestions(q);
        showSuggest(items);
      }, 250);
    });

    // --- Fallback pickup suggestions (used when map is unavailable or GPS denied)
    const pickupTxt = $('pickupTxt');
    const pickupSug = $('pickupSuggestions');
    let pickTmr = null;
    function showPickupSuggest(items){
      if (!pickupSug) return;
      if (!items || !items.length){ pickupSug.innerHTML=''; return; }
      pickupSug.innerHTML = items.slice(0,6).map((it, idx)=>{
        const title = (it.title||'').replace(/</g,'&lt;');
        const sub = (it.subtitle||'').replace(/</g,'&lt;');
        return `<div class="sug" data-idx="${idx}"><strong>${title}</strong><span>${sub}</span></div>`;
      }).join('');
      pickupSug.onclick = (e)=>{
        const el = e.target.closest('.sug');
        if (!el) return;
        const idx = Number(el.dataset.idx);
        const it = items[idx];
        if (!it) return;
        pickup = { lat: Number(it.lat), lon: Number(it.lon), text: it.title };
        if (pickupTxt) pickupTxt.value = it.title;
        pickupSug.innerHTML='';
        // If map exists, reflect markers; otherwise just proceed
        setMarker('pick', pickup.lat, pickup.lon);
        if (drop) drawLine(pickup, drop);
        setStatus('Mövcud yer seçildi', true);
        validate();
      };
    }
    async function loadPickupSuggestions(q){
      try{
        const url = new URL('/api/places', location.origin);
        url.searchParams.set('q', q);
        const r = await fetch(url.toString());
        const j = await r.json();
        if (j?.ok) return j.items || [];
      }catch(_){ }
      return [];
    }
    if (pickupTxt){
      pickupTxt.addEventListener('input', ()=>{
        const q = pickupTxt.value.trim();
        pickup = null;
        validate();
        clearTimeout(pickTmr);
        if (q.length < 3){ showPickupSuggest([]); return; }
        pickTmr = setTimeout(async ()=>{
          const items = await loadPickupSuggestions(q);
          showPickupSuggest(items);
        }, 250);
      });
    }
    document.addEventListener('click', (e)=>{
      if (!destSuggest.contains(e.target) && e.target !== destInput){
        destSuggest.style.display='none';
      }
    });

    // --- Ride lifecycle
    function activeFromList(rides){
      if (!Array.isArray(rides)) return null;
      return rides.find(r => ['searching','assigned','started'].includes(String(r.status))) || null;
    }

    function renderDriver(r){
      const hasDriver = !!r?.driver_id;
      if (!hasDriver){
        driverCard.style.display='none';
        return;
      }

      const name = r.driver_first_name || 'Sürücü';
      const username = r.driver_username ? '@'+r.driver_username : '';
      const plate = r.driver_plate || '';
      const car = [r.driver_car_make, r.driver_car_model, r.driver_car_color, r.driver_car_year].filter(Boolean).join(' · ');
      const phone = r.driver_phone || '';

      dName.textContent = name;
      dMeta.textContent = [username, plate, car].filter(Boolean).join('  •  ') || '—';
      dHint.textContent = phone ? ('Telefon: '+phone) : (r.driver_tg_id ? ('Telegram: tg:'+r.driver_tg_id) : '');

      // ETA best-effort
      let eta=null;
      const dl = Number(r.driver_last_lat);
      const dn = Number(r.driver_last_lon);
      if (pickup && isFinite(dl) && isFinite(dn)){
        const km = haversineKm({lat:dl, lon:dn}, {lat:Number(r.pickup_lat), lon:Number(r.pickup_lon)});
        eta = Math.max(1, Math.round((km/25)*60));
      }
      if (eta){ dEta.style.display='inline-block'; dEta.textContent = eta+' dəq'; }
      else { dEta.style.display='none'; }

      // Buttons
      btnCall.onclick = ()=>{
        if (phone){ location.href = 'tel:'+String(phone).replace(/\s+/g,''); return; }
        if (r.driver_tg_id){
          // Telegram user id can't be opened directly, but we keep hint
          setStatus('Telefon yoxdur. Telegram ID: '+r.driver_tg_id, false);
          return;
        }
        setStatus('Əlaqə məlumatı yoxdur.', false);
      };
      btnMsg.onclick = ()=>{
        if (r.driver_username){ location.href = 'https://t.me/'+r.driver_username; return; }
        if (r.driver_tg_id){ setStatus('Mesaj üçün username yoxdur. Telegram ID: '+r.driver_tg_id, false); return; }
        setStatus('Mesaj üçün məlumat yoxdur.', false);
      };

      driverCard.style.display='';
    }

    function renderRide(r){
      if (!r){
        renderDriver(null);
        setStatus(pickup ? ('Pick-up: '+pickup.text) : 'GPS oxunur…');
        return;
      }
      const st = String(r.status);
      if (st === 'searching') setStatus('Yaxın sürücülərə təklif göndərilir…');
      if (st === 'assigned') setStatus('Sürücü təyin edildi. Təsdiq gözlənilir…');
      if (st === 'started') setStatus('Sürücü yoldadır…');

      // map markers
      setMarker('pick', Number(r.pickup_lat), Number(r.pickup_lon));
      setMarker('drop', Number(r.drop_lat), Number(r.drop_lon));
      drawLine({lat:Number(r.pickup_lat), lon:Number(r.pickup_lon)}, {lat:Number(r.drop_lat), lon:Number(r.drop_lon)});
      if (isFinite(Number(r.driver_last_lat)) && isFinite(Number(r.driver_last_lon))){
        setMarker('drv', Number(r.driver_last_lat), Number(r.driver_last_lon));
      }
      renderDriver(r);
    }

    async function pollRides(){
      try{
        const j = await api('/api/passenger/my_rides');
        activeRide = activeFromList(j.rides);
        renderRide(activeRide);
      }catch(e){
        // keep UI usable even if backend temporarily fails
        setStatus('Server əlaqəsi kəsildi. Yenidən yoxlanılır…', false);
      }
    }

    async function createRide(){
      if (!pickup){ await ensurePickup(true); }
      if (!pickup){
        try{
          const c = map.getCenter();
          pickup = { lat: c.lat, lon: c.lng, text: 'Xəritə mərkəzi (manual)' };
          setMarker('pick', pickup.lat, pickup.lon);
          const nm = await reverseName(pickup.lat, pickup.lon);
          if (nm) pickup.text = nm;
          setStatus('Pick-up: '+pickup.text);
        }catch(_){ }
      }
      if (!pickup){ return; }
      if (!drop){ setStatus('Təyinat seçin.', false); return; }
      try{
        btnCreate.disabled = true;
        setStatus('Sifariş yaradılır…');
        const j = await api('/api/passenger/create_ride', { method:'POST', body:{
          pickup_lat: pickup.lat, pickup_lon: pickup.lon, pickup_text: pickup.text,
          drop_lat: drop.lat, drop_lon: drop.lon, drop_text: drop.text
        }});
        activeRide = j.ride;
        renderRide(activeRide);
        // Start polling
        if (pollTmr) clearInterval(pollTmr);
        pollTmr = setInterval(pollRides, 2000);
      }catch(e){
        setStatus('Xəta: '+(e?.data?.error||e?.message||'server_error'), false);
      }finally{
        validate();
      }
    }

    async function cancelRide(){
      if (!activeRide?.id){ setStatus('Aktiv gediş yoxdur.', false); return; }
      try{
        setStatus('Ləğv edilir…');
        await api('/api/passenger/cancel_ride', { method:'POST', body:{ ride_id: Number(activeRide.id) }});
        activeRide = null;
        renderRide(null);
        // refresh
        await pollRides();
      }catch(e){
        setStatus('Ləğv xətası: '+(e?.data?.error||e?.message||'server_error'), false);
      }
    }

    // Buttons
    btnCreate.addEventListener('click', createRide);
    btnCancel.addEventListener('click', cancelRide);
    $('btnCenter').addEventListener('click', ()=>ensurePickup(true));
    $('btnMenu').addEventListener('click', ()=>{
      // Keep simple: open Telegram settings / close app
      try{ Telegram.WebApp?.openTelegramLink?.('https://t.me'); }catch(_){ }
    });

    // Boot
    (async ()=>{
      // Do NOT block UI on GPS: some Telegram WebViews require user gesture.
      pollRides();
      pollTmr = setInterval(pollRides, 2500);
      validate();
      // Try GPS in background (will auto-fallback after a few seconds)
      ensurePickup(false);
    })();
</script>
</body>
</html>
